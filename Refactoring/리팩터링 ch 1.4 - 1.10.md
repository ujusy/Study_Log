# 리팩터링 ch 1.5 - 1.10


가장 인상 깊었던 챕터는 1.8의 `다형성을 활용해 계산 코드 재구성`하기 챕터였다.

해당 챕터는 조건부 로직을 `다형성`으로 바꾸는 작업을 예시로 보여주고있다.

다형성을 지원하게 만들기 위해 타입 코드 대신 서브클래스를 사용하도록 변경한다. 그 과정에서 딱 맞는 서브클래스를 사용하기 위해 생성자가 아닌 함수를 호출하도록 변경하였다.

이유는 자바스크립트에서는 생성자가 서브클래스의 인스턴스를 반화할 수 없기 때문이다. 따라서 해당 부분은 생성자를 팩터리 함수로 변경하여 적용하는 과정을 거친다.

내가 해당 챕터를 이해한 내용은 아래와 같다.

공통된 행위를 하는 부분을 슈퍼클래스에 메서드를 정의하고 각각 서브 클래스에서 `오버라이딩`을 하여 조건부 로직을 `다형성`으로 바꾸는것으로 이해했다.

예를 들어 s 강의의 판매 합계, a 강의의 판매 합계를 구한다고 할 때 합계를 하는 행위가 공통적이다. 이를 sum 이라고하자.(강의 합계 방식이 다르다고 가정)

``` javascript
class SuperClass {
  get sum() {}
}
```

s 의 행위를 담당하는 클래스

```javascript
class S {
  get sum () { ... }
}
```

책에 나온 예제는 도메인 단위보다는 기능 단위의 클래스였는데 공통된 부분을 어떻게 추상화 하느냐가 관건인거 같다.

다형성을 제외하고 기억에 남는 리팩터링 기법 중 하나는 `반복문을 파이프라인으로 바꾸기`이다. 

처음에 해당 내용을 보고 파이프라인으로 바꾸는게 무슨 의미인지에 대한 궁금증이 생겼다. 

예제를 보니 `for` 반복문을 `reduce` 로 변경하였다.

반복문이 아닌 컬렉션 파이프라인을 이용하면 처리 과정을 일련의 연산으로 표현할 수 있어 이해하기 쉬워진다는 장점이 있다고한다.

개인적으로 해당 부분은 개발자 스스로 상황에 맞게 좀 더 직관적인 방식으로 사용하면 될 것 같다.
