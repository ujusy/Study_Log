# 리팩터링 ch 3.1 - 3.10
Ch 3. 코드에서 나는 악취 챕터이다.. 코드에서 나는 악취라니 ㅜㅜ (레거시 코드에 기여한 1인으로서 마음이 아프다,,)



본격적으로 내용에 들어가기 앞서 ch2에도 언급했던 리팩터링을 언제해야하는가에 대한 기준을 얘기하고있다.

리팩터링할 시점을 '냄새'라는 표현을 사용했는데 ch3을 읽고 코드가 풍기는 냄새가 무엇인지 찾자 ~ 이런내용을 소개글에 담고있다.



3.1~3.3 모두 다 다른 내용이지만 중복 코드를 없애면서 변수 명, 함수 명을 직관적으로 짓는 부분을 강조한다고 느꼇다.

챕터 1 부터 꽤 많이 나오는 얘기 중 하나가 함수 추출하기이다. 함수를 추출하여 또 다른 함수에게 위임하는 방식이 좋다 라고 설명하는데 이렇게 위임하는 경우 짧은 함수로 구성되어 코드를 이해하는데 쉽게 한다고한다. -> 사실 이 부분이 잘 와닿지는 않는다..

3.4 긴 매개변수 목록.  해당 부분은 최근에 개발하면서 적용해본 경험이 있다. 함수를 호출할 때 매개변수 하나하나 다 넘겨주는 개발 스타일을 가지고 있었는데 이렇게 개발하다보니 변경에 너무 취약했다. 함수의 역할이나 동작하기 위한 매개변수 하나만 바뀌어도 변경해야하는 코드 줄이 ㅜㅜ 차라리 호출부에서 매개변수를 객체화하여 넘겨주게 되면 변경이 일어나더라도 함수의 호출 매개변수를 하나하나 바꿔주지 않아도 된다. 이거는 경험에서 수정하게 된 사항이고 책에서는 여러가지 방법을 소개하고 있었다. 매개변수를 질의 함수로 바꾸기, 매개변수 객체 만들기, 플래그 인수 제거하기 등이 있다고한다. 이 후 챕터에서 좀 더 자세하게 다룬다.

3.5 전역데이터. 음.. 일단 전역이라는 단어를 접할 때부터 싸한 느낌이 든다. ㅋㅋ 전역변수는 지양하라는 말을 꽤 많이 들어왔기 때문에.. 전역 데이터를 사용할 때의 문제점은 코드베이스 어디에서든 건드릴 수 있고 변경이 되었을 때 값을 누가 바꾸었는지 찾아낼 메커니즘이 없다는 것이다. 해당 문제의 해결 방법으로 변수 캡슐화하기가 있다고한다. 6.6절에서 소개하고있는데 궁금해서 뒤로 슉 가서 읽어보았다. 음.. 먼가 6.6절의 예시 코드를 보면 자바스럽다해야하나..?(나만 그렇게 느꼇을수도..) 그런 느낌이 들었다.ㅋㅋ

3.6 가변데이터. 데이터를 변경했더니 예상치 못한 결과나 골치 아픈 버그로 이어지는 경우.. 코드의 다른 곳에서는 다른 값을 기대한다는 사실을 인식하지 못한 채 수정해버리면 프로그램이 오작동하는 문제가 발생한다. 음.. 해당 부분은 겪어보지 못한 문제이지만 코드의 양이 방대해질 경우 해당 문제를 꽤 겪을 것 같다. 여기서도 변수 캡슐화하기를 적용하라고 말하고있는데 이 방법을 사용하면 정해놓은 함수를 거쳐야만 값을 수정할 수 있도록 하기 때문에 값이 어떻게 수정되는지 감시하거나 코드를 개선하기 쉽다고한다... 

3.7-3.10 다 각자 다른 내용을 담고있지만 해당 챕터들을 읽어보았을 때 객체 지향에서 주로 이야기하는 역할과 책임의 단어가 떠올랐다. 같은 역할을 가지고 있는 것끼리 묶어 해당 역할에 변경이 일어날 때 다른 역할을 가지고 있는 부분에서는 영향을 최소화할 수 있도록 하는거라고 이해하고 있는데 해당 챕터들의 전체적인 내용이 비슷한 개념이었던 것 같다. 여기서 자주 나오는 해결 방법은 일단 함수 추출, 비슷한 데이터를 다루는 함수들을 클래스로 묶기, 클래스 추출하기 등이다. 공통적인 부분을 잘 묶어 코드를 명확하게 해보자..



책으로만 읽다보니 음.. 이론적으로는 그렇구나~하면서 읽기는하는데 이게 잘 적용이될까 의문이 생길 때도 있다 .,, 직접 리팩터링을 해본 경험은 거의 없어서 잘 적용될까라는 의문과 과연..직접하면 재밌을까 라는 의문에 머리속에 있는데 재미을 붙여봐야하나 싶다..

